"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.compressJSONPayload = void 0;
const node_zlib_1 = __importDefault(require("node:zlib"));
const json_stream_stringify_1 = require("json-stream-stringify");
function compressJSONPayload(data, headers) {
    headers['Content-Type'] = 'application/json';
    headers['Content-Encoding'] = 'gzip';
    const zipper = node_zlib_1.default.createGzip();
    const streamer = new json_stream_stringify_1.JsonStreamStringify(data);
    return streamer.pipe(zipper);
}
exports.compressJSONPayload = compressJSONPayload;
//# sourceMappingURL=util.js.map